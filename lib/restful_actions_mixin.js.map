{"version":3,"file":"restful_actions_mixin.js","names":["_api","_interopRequireDefault","require","_base_model","_isString","_isFunction","obj","__esModule","default","BaseModel","addClassAction","attributes","_this","isString","name","API","request","method","data","endpoint","urlRoot","onSuccess","options","arguments","length","undefined","json","body","model","set","modelJson","jsonKey","topLevelJson","isFunction","afterCreate","id","isIncludeDeleted","_this2","concat","include_deleted","addAction","_this3","afterUpdate","_this4","onDestroy","afterDestroy"],"sources":["../src/restful_actions_mixin.js"],"sourcesContent":["import API from './api';\nimport BaseModel from './base_model';\n\nimport isString from 'lodash/isString';\nimport isFunction from 'lodash/isFunction';\n\n\nBaseModel.addClassAction('create', function(attributes) {\n\n  if (isString(attributes)) {\n    attributes = { name: attributes }\n  }\n\n  return API.request({\n    method: 'post',\n    data: attributes,\n    endpoint: this.urlRoot,\n    onSuccess: (options = {}) => {\n      const json = options.body;\n\n      let model = this.set({\n        modelJson: json[this.jsonKey],\n        topLevelJson: json\n      });\n\n      if (isFunction(model.afterCreate)) {\n        model.afterCreate(options);\n      }\n\n    }\n  });\n});\n\n\nBaseModel.addClassAction('load', function(id, isIncludeDeleted) {\n  return API.request({\n    endpoint: `${this.urlRoot}/${id}`,\n    data: {\n      include_deleted: isIncludeDeleted\n    },\n    onSuccess: (options = {}) => {\n      const json = options.body;\n\n      this.set({\n        modelJson: json[this.jsonKey],\n        topLevelJson: json\n      });\n\n    }\n  })\n});\n\n\nBaseModel.addAction('update', function(attributes = {}) {\n  return API.request({\n    method: 'put',\n    data: attributes,\n    endpoint: `${this.urlRoot}/${this.id}`,\n    onSuccess: (options = {}) => {\n      const json = options.body;\n\n      this.set({\n        modelJson: json[this.jsonKey],\n        topLevelJson: json\n      });\n\n      if (isFunction(this.afterUpdate)) {\n        this.afterUpdate(options);\n      }\n\n    }\n  });\n});\n\n\nBaseModel.addAction('destroy', function() {\n  return API.request({\n    method: 'del',\n    endpoint: `${this.urlRoot}/${this.id}`,\n    onSuccess: (options = {}) => {\n      this.onDestroy();\n\n      if (isFunction(this.afterDestroy)) {\n        this.afterDestroy(options);\n      }\n\n    }\n  });\n});\n\n"],"mappings":";;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAA2C,SAAAD,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAG3CG,mBAAS,CAACC,cAAc,CAAC,QAAQ,EAAE,UAASC,UAAU,EAAE;EAAA,IAAAC,KAAA;EAEtD,IAAI,IAAAC,iBAAQ,EAACF,UAAU,CAAC,EAAE;IACxBA,UAAU,GAAG;MAAEG,IAAI,EAAEH;IAAW,CAAC;EACnC;EAEA,OAAOI,YAAG,CAACC,OAAO,CAAC;IACjBC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEP,UAAU;IAChBQ,QAAQ,EAAE,IAAI,CAACC,OAAO;IACtBC,SAAS,EAAE,SAAAA,CAAA,EAAkB;MAAA,IAAjBC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;MACtB,MAAMG,IAAI,GAAGJ,OAAO,CAACK,IAAI;MAEzB,IAAIC,KAAK,GAAGhB,KAAI,CAACiB,GAAG,CAAC;QACnBC,SAAS,EAAEJ,IAAI,CAACd,KAAI,CAACmB,OAAO,CAAC;QAC7BC,YAAY,EAAEN;MAChB,CAAC,CAAC;MAEF,IAAI,IAAAO,mBAAU,EAACL,KAAK,CAACM,WAAW,CAAC,EAAE;QACjCN,KAAK,CAACM,WAAW,CAACZ,OAAO,CAAC;MAC5B;IAEF;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;AAGFb,mBAAS,CAACC,cAAc,CAAC,MAAM,EAAE,UAASyB,EAAE,EAAEC,gBAAgB,EAAE;EAAA,IAAAC,MAAA;EAC9D,OAAOtB,YAAG,CAACC,OAAO,CAAC;IACjBG,QAAQ,KAAAmB,MAAA,CAAK,IAAI,CAAClB,OAAO,OAAAkB,MAAA,CAAIH,EAAE,CAAE;IACjCjB,IAAI,EAAE;MACJqB,eAAe,EAAEH;IACnB,CAAC;IACDf,SAAS,EAAE,SAAAA,CAAA,EAAkB;MAAA,IAAjBC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;MACtB,MAAMG,IAAI,GAAGJ,OAAO,CAACK,IAAI;MAEzBU,MAAI,CAACR,GAAG,CAAC;QACPC,SAAS,EAAEJ,IAAI,CAACW,MAAI,CAACN,OAAO,CAAC;QAC7BC,YAAY,EAAEN;MAChB,CAAC,CAAC;IAEJ;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;AAGFjB,mBAAS,CAAC+B,SAAS,CAAC,QAAQ,EAAE,YAA0B;EAAA,IAAAC,MAAA;EAAA,IAAjB9B,UAAU,GAAAY,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACpD,OAAOR,YAAG,CAACC,OAAO,CAAC;IACjBC,MAAM,EAAE,KAAK;IACbC,IAAI,EAAEP,UAAU;IAChBQ,QAAQ,KAAAmB,MAAA,CAAK,IAAI,CAAClB,OAAO,OAAAkB,MAAA,CAAI,IAAI,CAACH,EAAE,CAAE;IACtCd,SAAS,EAAE,SAAAA,CAAA,EAAkB;MAAA,IAAjBC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;MACtB,MAAMG,IAAI,GAAGJ,OAAO,CAACK,IAAI;MAEzBc,MAAI,CAACZ,GAAG,CAAC;QACPC,SAAS,EAAEJ,IAAI,CAACe,MAAI,CAACV,OAAO,CAAC;QAC7BC,YAAY,EAAEN;MAChB,CAAC,CAAC;MAEF,IAAI,IAAAO,mBAAU,EAACQ,MAAI,CAACC,WAAW,CAAC,EAAE;QAChCD,MAAI,CAACC,WAAW,CAACpB,OAAO,CAAC;MAC3B;IAEF;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;AAGFb,mBAAS,CAAC+B,SAAS,CAAC,SAAS,EAAE,YAAW;EAAA,IAAAG,MAAA;EACxC,OAAO5B,YAAG,CAACC,OAAO,CAAC;IACjBC,MAAM,EAAE,KAAK;IACbE,QAAQ,KAAAmB,MAAA,CAAK,IAAI,CAAClB,OAAO,OAAAkB,MAAA,CAAI,IAAI,CAACH,EAAE,CAAE;IACtCd,SAAS,EAAE,SAAAA,CAAA,EAAkB;MAAA,IAAjBC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;MACtBoB,MAAI,CAACC,SAAS,CAAC,CAAC;MAEhB,IAAI,IAAAX,mBAAU,EAACU,MAAI,CAACE,YAAY,CAAC,EAAE;QACjCF,MAAI,CAACE,YAAY,CAACvB,OAAO,CAAC;MAC5B;IAEF;EACF,CAAC,CAAC;AACJ,CAAC,CAAC"}